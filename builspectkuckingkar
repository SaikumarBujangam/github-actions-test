pipeline_checker = PipelineCheck()
try:
    statuses = pipeline_checker.check_pipeline_status()
    failed_stages = [stage for stage, status in statuses if status in ['Failed', 'Stopped']]
    
    if failed_stages:
        error_message = "Pipeline execution failed/stopped in stages: {}".format(", ".join([stage for stage, _ in failed_stages]))
        pipeline_checker.logger.error(error_message)
        raise Exception(error_message)
    else:
        pipeline_checker.logger.info("All pipeline stages completed successfully.")
except Exception as e:
    pipeline_checker.logger.error("Error checking pipeline status: {}".format(e))
    sys.exit(1)
