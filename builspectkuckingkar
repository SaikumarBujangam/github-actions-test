resource "aws_subnet" "mgmt_public_subnet" {
  count             = length(var.public_subnets_cidr) > 0 ? length(var.public_subnets_cidr) : 0
  vpc_id            = aws_vpc.mgmt_vpc.id
  cidr_block        = var.public_subnets_cidr[count.index]
  availability_zone = var.azs[count.index]

  tags = merge(
    {
      "Name" = "${var.env}-${var.platform}-mgmt-az-${element(split("-",var.azs[count.index]),2)}"
    },
  )
}
Error: Invalid index
│
│   on main.tf line 57, in resource "aws_subnet" "mgmt_public_subnet":
│   57:   cidr_block        = var.public_subnets_cidr[count.index]
│     ├────────────────
│     │ count.index is a number, known only after apply
│     │ var.public_subnets_cidr is a string, known only after apply
│
│ This value does not have any indices.
