resource "aws_route53_record" "validation_v2" {
  count = var.create_certificate_v2 ? 1 : 0

  dynamic "validation" {
    for_each = aws_acm_certificate.certificate_v2[0].domain_validation_options
    content {
      name            = validation.value.resource_record_name
      type            = validation.value.resource_record_type
      zone_id         = data.aws_route53_zone.hosted_zone_v2.id
      records         = [validation.value.resource_record_value]
      ttl             = "60"
      allow_overwrite = true
    }
  }
}
