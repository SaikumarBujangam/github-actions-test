$InstanceId = (aws ec2 describe-instances --filters Name=instance-id,Values=i-009e7e8992a113a82 Name=instance-state-name,Values=running --query 'Reservations[*].Instances[*].InstanceId' --output text --region eu-central-1)
$VolumeId = (aws ec2 describe-volumes --filters Name=attachment.instance-id,Values=$InstanceId Name=attachment.device,Values=/dev/xvda --query 'Volumes[*].VolumeId' --output text --region eu-central-1)
aws ec2 modify-volume --volume-id $VolumeId --size 20 --region eu-central-1

resource "null_resource" "resize_root_volume" {
  depends_on = [aws_cloud9_environment_ec2.cloud9_ide]

  provisioner "local-exec" {
    command = "powershell.exe -ExecutionPolicy Bypass -File ${path.module}/resize_volume.ps1"
  }
}
