resource "aws_cloudwatch_metric_alarm" "search_request_latency_alarm" {
  alarm_name          = "SearchRequestLatencyAlarm"
  comparison_operator = "GreaterThanOrEqualToThreshold"
  evaluation_periods  = 3
  metric_name         = "SearchRequestLatency"
  namespace           = "AWS/ES"
  period              = 300 # 5 minutes
  statistic           = "Average"
  threshold           = 500 # milliseconds

  dimensions = {
    DomainName = "your-opensearch-domain-name"
  }

  alarm_description = "Alarm for high search request latency"
  alarm_actions     = ["arn:aws:sns:us-west-2:123456789012:example-topic"]

  tags = {
    Name        = "SearchRequestLatencyAlarm"
    Environment = "production"
  }
}
