C:\Users\umababy.kannan\OneDrive - HCL Technologies Ltd\Documents\Star CAP\project-infra-provisioning-services\terraform-init>terraform plan
╷
│ Error: Error in function call
│
│   on ..\terraform-script\compute-module\test\main.tf line 106, in resource "aws_sagemaker_notebook_instance" "jupyter":
│  106:   name  = upper(format("%s%s%s%", local.jup_resource_name_prefix, local.jup_resource_vpc_name, var.jupyter_count, "-JUPYTER-ONDEMAND"))
│     ├────────────────
│     │ local.jup_resource_name_prefix is "DEFAULT-"
│     │ local.jup_resource_vpc_name is "1234-"
│     │ var.jupyter_count is "1"
│
│ Call to function "format" failed: invalid format string starting at offset 7.

locals {
  
  environment          = terraform.workspace
  resource_name_prefix = upper(format("%s%s", local.environment, "_"))
  jup_resource_name_prefix = upper(format("%s%s", local.environment, "-"))
  resource_vpc_name      = upper(format("%s%s", var.project_uid, "_"))
  jup_resource_vpc_name      = upper(format("%s%s", var.project_uid, "-"))
  create_project_ds_role = true

  tags = {
    terraform                = "true"
    "redcap:project-id"      = var.project_uid 
  }
}

##################################
# Project On Demand JUPYTER Instance
##################################

resource "aws_sagemaker_notebook_instance" "jupyter" {
  
  name  = upper(format("%s%s%s%", local.jup_resource_name_prefix, local.jup_resource_vpc_name, var.jupyter_count, "-JUPYTER-ONDEMAND"))
  instance_type = var.jupyter_instance_type
  role_arn = aws_iam_role.sagemaker_role.arn
  subnet_id = var.subnet_ids[0]
  security_groups = [aws_security_group.notebook_security_group.id]
  lifecycle_config_name = "default"
  root_access = "Disabled"
  tags  = local.tags
  
}

