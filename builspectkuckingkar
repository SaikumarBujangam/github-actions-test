# ...

run: |
  # List secrets in the source repository
  secrets_list=$(gh secret list -R $SOURCE_REPO --json name)

  # Loop through each secret and add it to the target repository
  echo $secrets_list | jq -r '.[].name' | while read -r secret_name; do
    secret_value=$(gh secret get $secret_name -R $SOURCE_REPO --json value | jq -r '.value')
    gh secret set $secret_name --repo $TARGET_REPO --body "$secret_value"
  done
