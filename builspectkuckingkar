module.fsx.aws_fsx_lustre_file_system.fsx_scratch: Creating...
╷
│ Error: creating FSx Lustre File System: BadRequest: 1 validation error detected: Value '[10.1.12.0/24]' at 'subnetIds' failed to satisfy constraint: Member must satisfy constraint: [Member must have length less than or equal to 24, Member must have length greater than or equal to 15, Member must satisfy regular expression pattern: ^(subnet-[0-9a-f]{8,})$]
│
│   with module.fsx.aws_fsx_lustre_file_system.fsx_scratch,
│   on ..\terraform-modules\terraform-aws-fsx\main.tf line 1, in resource "aws_fsx_lustre_file_system" "fsx_scratch":
│    1: resource "aws_fsx_lustre_file_system" "fsx_scratch" {
resource "aws_fsx_lustre_file_system" "fsx_scratch" {

  storage_capacity            = 1200
  subnet_ids                  = var.subnet_ids
  security_group_ids          = var.security_groups
  deployment_type             = "PERSISTENT_2"
  data_compression_type       = var.compression_type #LZ4
  per_unit_storage_throughput = var.per_unit_storage_throughput //125
  tags = merge(
    {
      "project" = "${var.project_key}"
    }, 
    {
      "platform" = "${var.platform}"
    }, 
    {
      "organization" = "${var.org_key}"
    }, 
   )
    timeouts {
    create = "60m"
    update = "2h"
    delete = "2h"
  }
}


resource "aws_fsx_data_repository_association" "bfx_fsx_scratch_data_rep" {
  file_system_id       = aws_fsx_lustre_file_system.fsx_scratch.id
  data_repository_path = "s3://${var.fsx_s3_bucket}"
  file_system_path     = "/"

  s3 {
    auto_export_policy {
      events = ["NEW", "CHANGED", "DELETED"]
    }

    auto_import_policy {
      events = ["NEW", "CHANGED", "DELETED"]
    }
  }
    timeouts {
    create = "60m"
    update = "2h"
    delete = "2h"
  }
}

module "fsx" {
  source                 = "../terraform-modules/terraform-aws-fsx"
  subnet_ids             = ["10.1.12.0/24"]
  
  security_groups         = ["sg-0ec9c8c61e2470c41"]
}
